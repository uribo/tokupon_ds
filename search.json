[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "データ分析入門",
    "section": "",
    "text": "このページは徳島大学デザイン型AI教育研究センターが 開催する、小中高生を対象にした「とくぽんAI塾 2022」のコースの一つである「データ分析入門」 の資料置き場です。\nコースは基礎編と発展編の2つに分けられます。基礎編では、データ分析に必要な知識・背景の理解のための 素養を身につけることを目指します。発展編ではデータ分析の問題への挑戦として、回帰と分類問題について 取り組みます。 このコースでは、基礎から発展まで通して R言語を使ったデータ分析を行います。\nまずデータ分析についての大まかな内容とデータ分析で扱われる課題について第1章で学びます。 次に第2章では、データの種類と扱い方、表現方法を身につけます。 第3章ではデータを要約ようやくし、伝えやすくするための方法を紹介します。 ここでは特に１つの変数へんすうについて扱います。 第4章は２つの変数の関係を調べるための相関について理解を深めます。 基礎編の最終章となる第5章では、データ分析に欠かせないデータのグラフ化、可視化のノウハウを学びます。 ここでは一般的な統計グラフの他に地図による表現についても紹介します。 続く発展編では、回帰と分類についてそれぞれ課題を設定し、Rによるプログラミングとその出力の理解を目指します。\n\n\n徳島大学マスコットキャラクターの「とくぽん」が解説を行います。 とくぽんによる解説には次の種類があります。\n\n\n\n\n\n\nノート\n\n\n\n全般的な補足をコメントするよ。\n\n\n\n\n\n\n\n\n練習問題\n\n\n\nとくぽんからの問題だよ。これまでの内容をおさらいして考えてみてね。\n\n\n\n\n\n\n\n\n警告\n\n\n\n注意が必要な事柄がある場合に説明をするよ。\n\n\n\n\n\nこの内容が分かりにくかった、読めないが漢字があったときには 気軽にコメントいただけると改善のために役立ちます。 コメントは GitHub issuesもしくはフォームから投稿をお願いします。\n\n\n\n\nR version 4.2.1\nmacOS Monterey 12.4\n\nこのページはQuartoを使って作成されています。\nページ中のRのコードは下記のようにコードブロックで表示しています。 このコードブロックは右上にカーソルを移動させたときに表示されるアイコンをクリックすることで 内容がコピーされます。また、一部のコードについては非表示の状態のものもあります。 コードを表示とある場合、クリックによってコードが表示されます。\n\nrenvによるパッケージ管理、GitHub actionsによるページのビルドを行っています。\n\n\n\nMIT"
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  はじめに",
    "section": "",
    "text": "データ分析とは、 データを人間が利用できる形に変換することで 対象についての理解や予測を目指す手続きを指します。 ここでいうデータとは、観測や実験により取得されるものです。\nデータ分析には次の目的があります。\n\nデータを要約ようやくすること\nデータの意味・関係を説明すること\n新たに得られるデータに対する予測を行うこと\n\n要約とは物事の中心となる大切な部分を短くまとめることです。 一般的にデータ分析の対象となるデータは膨大ぼうだいです。 そのため一つ一つのデータを見ていくことは難しいです。 そこでデータを要約する方法として代表値によるデータの集約やグラフによるデータ可視化が行われます。 この方法について、コースの中でも第2章と第4章で扱います。\n２つ目の目的として、データがもつ意味やデータに含まれる値の関係性を説明することがあります。 例えば、動物園で飼育されるペンギンの各個体について、体の部位を測定したデータを集めたとします。 そのとき、体の部位ごとにどのような意味、関係があるかを説明する場合、データ分析が役立ちます。\n次に示す 図 1.1 は、ペンギンの各個体の大きさを記録したデータをグラフ化したものです。 この図からどのようなことが言えるでしょうか。\n\n\nコードを表示\nlibrary(ggplot2)\nlibrary(palmerpenguins)\n\np <- \n  ggplot(penguins, aes(flipper_length_mm, bill_length_mm)) +\n  xlab(\"翼の長さ(mm)\") +\n  ylab(\"口ばしの長さ(mm)\")\n\np + \n  geom_point()\n\n\n\n\n\n図 1.1: ペンギンの体の大きさの関係\n\n\n\n\n図 1.1 のようなグラフを散布図と呼びます。 散布図は２つのデータの関係を示すのによく使われます。 ここではグラフの下部と左側に表記がある通り（それぞれx軸、y軸と言います）、 「翼の長さ」と「口ばしの長さ」を示しています。 軸の横に書かれている数値はその大きさです。 一つ一つの点がペンギンの個体を表しています。\n図 1.1 を見ると、翼の長さが大きい個体ほど口ばしの長さも大きいと言えるような気がします。 そこでデータ分析では「ペンギンの個体は翼の長さが大きい個体ほど口ばしの長さも大きい」という仮定を置きます。 この仮定を説明するために、データ分析ではデータの間の関係を説明する「モデル」を考えます。\nまた、先ほどのペンギンデータは実は複数のペンギンの種類について調べたデータだったとします。 このとき、体の部位の関係の説明にペンギンの種類という、もう一つのデータが加わることになります。 そこで 図 1.1 の図に手を入れて、種類ごとに色分けした図を見てみることにします (図 1.2)。\n\n\nコードを表示\np + \n  geom_point(aes(color = species)) +\n  scale_color_discrete(labels = c(\"アデリーペンギン\", \"ヒゲペンギン\", \"ジェンツーペンギン\"))\n\n\n\n\n\n図 1.2: ペンギンの体の大きさの関係を種類別に比較する\n\n\n\n\n図 1.2 では、最初の仮定（翼の長さと口ばしの長さが比例して大きくなる）が変わることはなさそうです。 しかしペンギンの種類によって体の部位の大きさには幅が決まっていそうだ、ということも見えてきました。 具体的にはアデリーペンギン、ヒゲペンギン、ジェンツーペンギンの順番で体の大きさに違いがあるようです。 これも新たな仮定としておきましょう。 この仮定を調べるためのモデルも存在します。 こうしたデータ間の比較ひかく（2つあるいは3つ以上のものを比べ、そこにある違いを考えること）もデータ分析で扱う内容です。\nデータ分析の最後の目的は、新たに得られるデータに対する予測を行うことです。 これまでに集めたデータや構築したモデルから、新たなデータへの予測を行います。 モデルが存在することで、ある程度の未知のデータに対する予測が可能になります。 ペンギンの体の大きさの例で見たように、翼の長さがわかれば、口ばしの長さに対する見通しが立ちます。 また、ある程度の大きさであれば種類まで特定できるかもしれません。\nデータ分析を行うために統計学の知識を活用します。 統計学では確率論と呼ばれる数学の力を使うことでデータ分析の幅を広げることができます。\n数学は理系の印象がありますが、データ分析は文理問わず求められる技能です。\n\n\n課題や適切なデータを見つける、データを解析する、解析結果を利用する\n\n\n\nデータ処理、分析のための専門知識を備える\nデータに含まれる誤差やバイアスといった性質を正しく理解した上で、 データから有益な情報（価値）を引き出すための学問分野をデータサイエンスと呼びます。\nデータから得られた情報が活用された例を示として、 18XX年に 大流行したコレラ があります。\n\n\n\n\n\n\nノート\n\n\n\nジョン・スノウによる\nがされる前は\n\n\nデータサイエンスでは情報学と統計学の技能を生かして\nまた、データサイエンスにより企業や研究に貢献する人々のことをデータサイエンティストと言います。"
  },
  {
    "objectID": "intro.html#データグラフに騙されない",
    "href": "intro.html#データグラフに騙されない",
    "title": "1  はじめに",
    "section": "1.2 データ、グラフに騙されない",
    "text": "1.2 データ、グラフに騙されない\n普段の生活の中で、数値やグラフを目にする機会がたくさんあります。 天気予報や学校のテストの成績、スマートフォンやスマートウォッチで記録される歩数（図 1.3）などです。\n\n\n\n図 1.3: スマートフォンに記録される活動量。数値を時間ごとにグラフ化し、一日の活動量と時間帯の関係がわかる\n\n\nこのような数字やグラフを見た時に感じる印象は人それぞれですが、 多くの人が共感するものも存在します。\n次の 図 1.4 は文部科学省が毎年行う「学校保健統計調査」から5歳の幼児（男）における都道府県別の身長・体重の平均値を棒グラフにしたものです。全国で最も順位の低い県は徳島県であることがわかります。全国一位の宮城県と比べると何倍も差があるように見えます。しかしこれはグラフのトリックです。注意して横軸を見てみましょう。\n\n\n\n\n\n図 1.4: 誤解を招きやすいグラフの例。5歳の幼児における都道府県別の平均身長。グラフの横軸が0から始まっていないために値の差が大きく見えてしまう。\n\n\n\n\nこのグラフの横軸は0で始まっていないことに気がついたでしょうか。 これがグラフのトリックを引き起こしている原因です。 横軸が0からの図（図 1.5）と見比べてみましょう。\n\n\n\n\n\n図 1.5: 横軸を0から示した平均身長を示す棒グラフ\n\n\n\n\n先ほどは都道府県間の差が大きく感じたものが、今度はどの県も平坦な様子に思えたのではないでしょうか。 数値が変わったわけではないので、順位に違いはありませんが見た目の印象が大きく違います。 数値で確認すると、全国一位の宮城県の5歳の男児の平均身長は112.8cmで徳島県では110.1cmで、その差は2.7cmです。 図 1.4 で何倍も開きがあるように感じた印象ほどではないと思える数値ではないでしょうか。\n数字やグラフにはある種の説得力が存在します。 目に見えるものが示す内容を鵜呑みにして物事を判断してしまうことは危険です。 テストの点数がクラスの平均よりも低かったからと言って、クラスの上位に含まれていないとは限りません（逆もあります）。 また、最近では一日の新型コロナウィルス感染症の新規感染者数が報道されますが、悲観的になり過ぎる心配はない場合もあります。\n\n\n\n\n\n\nテストの点数がクラスの平均点よりも低くても上位に含まれる？\n\n\n\n40人のクラスで行われたテスト（100点満点）の平均点が48点でした。\nこのとき、点数が45点だった人はクラスの上位20人の中に含まれるでしょうか。\n\n\nコードを表示\nlibrary(ggplot2)\np <- \n  tibble::tibble(x = x) |> \n  ggplot(aes(x)) +\n  geom_density() +\n  xlim(0, 100) +\n  labs(title = \"40名のテスト点数の分布\")\n\n\n答えと解説は練習問題を見てね。\n\n\n目に見えるデータやグラフには、それを見せる側の意図が存在します。 平均身長のグラフでみたように、同じデータであっても何をどう示すか、どう解釈するかで印象が変わります。 見せ方を工夫して人を騙そうとするものもあり得るでしょう。 こうしたデータ、グラフに騙されないためには、データに対する素養を鍛えることが重要です。 読み書きをする能力のことをリテラシーと言いますが、データに対するリテラシーを備えておくことが求められています。"
  },
  {
    "objectID": "intro.html#統計",
    "href": "intro.html#統計",
    "title": "1  はじめに",
    "section": "1.3 統計",
    "text": "1.3 統計"
  },
  {
    "objectID": "intro.html#データ分析で扱う問題",
    "href": "intro.html#データ分析で扱う問題",
    "title": "1  はじめに",
    "section": "1.4 データ分析で扱う問題",
    "text": "1.4 データ分析で扱う問題\nデータ分析では「モデル」と呼ばれる考え方\n統計モデルを使って問題の解決に挑みます。\n回帰と分類\nこのコースでも、発展として簡単な回帰と分類問題に挑戦します。\n\n\n\n\n\n\nR言語について\n\n\n\nこのコースではR言語を使った実習を行うよ。 R言語は統計計算と作図の機能に優れたプログラミング言語の一種だよ。 オープンソース・フリーソフトウェアと言って、誰もが自由に使うことができるんだ。\nR言語に関心を持ったなら、付録の「Rのイロハ」を見てみてね。\nRのインストール方法、簡単な使い方を紹介するよ。"
  },
  {
    "objectID": "intro.html#まとめと課題",
    "href": "intro.html#まとめと課題",
    "title": "1  はじめに",
    "section": "1.5 まとめと課題",
    "text": "1.5 まとめと課題\n\n身の回りにあるデータやグラフを探してみよう。それはどんなものかな？"
  },
  {
    "objectID": "intro.html#参考文献url",
    "href": "intro.html#参考文献url",
    "title": "1  はじめに",
    "section": "1.6 参考文献・URL",
    "text": "1.6 参考文献・URL\n\n(西内啓 2013)\n(江崎貴裕 2020)\n(アルベルト・カイロ著(薮井真澄訳) 2020)\n小・中学生のための統計学習 まなぼう統計 https://www.toukei.metro.tokyo.lg.jp/manabou/ma-index.htm\nなるほど統計学園 https://www.stat.go.jp/naruhodo/ … 総務省統計局による、統計について興味・関心を持ってもらうための統計学習サイト\n\n\n\n\n\n江崎貴裕. 2020. 分析者のためのデータ解釈学入門 : データの本質をとらえる技術. ソシム. http://id.ndl.go.jp/bib/030791751.\n\n\nアルベルト・カイロ著(薮井真澄訳). 2020. グラフのウソを見破る技術 : マイアミ大学ビジュアル・ジャーナリズム講座. ダイヤモンド社. http://id.ndl.go.jp/bib/030421662.\n\n\n西内啓. 2013. 統計学が最強の学問である : データ社会を生き抜くための武器と教養. ダイヤモンド社. http://id.ndl.go.jp/bib/024193446."
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  データの種類と表現方法",
    "section": "",
    "text": "データを図で可視化する方法"
  },
  {
    "objectID": "data.html#データの種類",
    "href": "data.html#データの種類",
    "title": "2  データの種類と表現方法",
    "section": "2.1 データの種類",
    "text": "2.1 データの種類\nデータと言われて思い浮かべるものはなんでしょうか。 ここではデータをさまざまな計測や観察により得られる情報のことを示します。 対象から情報を引き出したものと言い換えることもできます。 多くは数値の形をしていますが、文字列である場合もあります。 例をあげてみましょう。 ある動物について、体の一部の大きさや体重を測る、雌雄を調べる。 これらはデータの一つです。\nRを使ったデータの記述方法を紹介します。 ここではある動物の種類についての体重と分類群を調べた結果を入力します。 c()関数1の括弧の中（引数ひきすう）に値である数値や文字列を記述します。 値と値の間にカンマ , を入力すると複数の値を記述することになります。 数値は直接入力できますが、文字列を与えるときは引用符 \" で文字列を囲む必要があります。\n\n# ある動物の種類についての体重と分類群を調べました\n# 複数の値を並べるときは カンマ , を使います\nc(6, 3.5, 5.4)\n\n[1] 6.0 3.5 5.4\n\n# 文字列は 引用符 \" で囲みます\nc(\"食肉類\", \"鳥類\", \"食肉類\")\n\n[1] \"食肉類\" \"鳥類\"   \"食肉類\"\n\n\n「複数の動物の体重」のように、共通の手法によって得られた値のことを変数へんすうといいます。 動物の体重は、個体や種類が違うと値も変わります。 このように対象によって数値が変わるもの、変化する値を意味します。\n\n2.1.1 変数の性質の違い\n体重を記録するときは数値を用いました。 このように数量を表す変数のことを量的変数といいます。 数値からなる変数なので、平均を求めたり大きい順番に並び替えるといった処理が可能です。\n量的変数の場合、数値の種類によってさらに離散変数と連続変数に分類できます。 変数の数値がとり得る値が一定の間隔によりバラバラなものを離散りさん変数と呼びます。 例えばサイコロの出目は一般的に1から6までの整数であるため、離散変数です。 また動物を1頭、2頭と数えた個体数も同じです。\n離散型の量的変数に対し、連続値で表現される変数を連続変数といいます。 3.5\\(kg\\)、5.4\\(kg\\)のように表現される体重は連続変数です。\nでは雌雄や分類群はどのように記録するのが適切でしょうか。 これらは数量として扱いにくいものです。 「雄」や「雌」、「鳥類」や「霊長類」という具合に項目を変数として扱う場合、 それは質的変数またはカテゴリ変数と呼ばれます。 質的変数は量的変数のように足し算や引き算といった計算ができないのが特徴です。\n\n\n\n\n\n\n\n測定の尺度\n\n\n\n変数の性質により、量的変数と質的変数をより細かく分類することもあるよ。 尺度水準と呼ばれる基準を用いると、量的変数は間隔尺度と比例尺度に、質的変数は名義尺度と順序尺度に分けて考えることができるんだ。それぞれの特徴を説明するね。\n\n比例尺度: 量的変数のうち値の比それ自体に意味のある尺度。\n間隔尺度: 量的変数で値の差自体に意味のある尺度。例) 華氏で記録した温度\n順序尺度: 質的変数で項目に順序があるもの。大小の比較ができるが演算には意味を持たない。代表値は最頻値や中央値で表される。例) 動物の保全状況\n名義尺度: 質的変数のうち、順序がないもの。値の比較や演算に意味を持たず、数値を単なる名前として対象に割り振る。このとき代表値の指標としては最頻値のみが利用できる。名義尺度だけで与えられるデータをカテゴリデータと呼ぶこともある。例) 雌雄、動物の分類群\n\n\n\nデータの種類に応じて名前がついている理由は、 データの種類によって適切なデータ分析の手法が異なるためです。 データ分析を行う際は、データがどの種類の変数なのか意識することが大切です。"
  },
  {
    "objectID": "data.html#データフレーム",
    "href": "data.html#データフレーム",
    "title": "2  データの種類と表現方法",
    "section": "2.2 データフレーム",
    "text": "2.2 データフレーム\nデータ分析の作業においては、データの変数を比較し、関係を調べることが頻繁に行われます。 特定の個体や観測について複数の項目を同時に扱えるようにするために、データを表形式でまとめて表現します。 これを表データまたはデータフレームと呼びます。\nデータフレームの例として、いくつかの動物の体の大きさ（体長）と体重の記録をデータフレームにまとめてみましょう。 データフレームでは個人や個体、観測といったデータを一つの行にまとめます。 レッサーパンダの体長と体重の行、チンパンジーの体長と体重の行と、それぞれの値を行単位で記録します。 22種類の動物のデータをとった場合は22行、40種の動物についてであれば40行となりますね。 また、動物の分類群や名前や体長、体重といった変数を列として表します。\n\n\n\n\n\nコードを表示\ndf_zoo_subset\n\n\n\n\n\n表 2.1: 5種の動物についての体長・体重のデータフレーム\n\n\n分類群\n動物の名前\n体長(cm)\n体重(kg)\n\n\n\n\n食肉類\nレッサーパンダ\n63.5\n6\n\n\n霊長類\nチンパンジー\n85.0\n60\n\n\n霊長類\nマントヒヒ\n80.0\n20\n\n\n食肉類\nライオン\n250.0\n225\n\n\n鳥類\nフンボルトペンギン\n69.0\n6\n\n\n\n\n\n\n\nデータフレームではデータを横に見たものが行、縦に見たものを列と考えます。 表 2.1 のデータフレームは5行4列のデータフレームといえます。\n\n\n\n\n\n\n表計算ソフトウェアでも表データを扱う\n\n\n\n表計算ソフトウェアにデータを記録するときもデータフレームと同じ形式をとるよ。 ここでは1,2,3といった数字が行、A、B、Cといったアルファベットが列を示しているね。 それぞれの値を記録している場所のことをセルというよ。 これはデータを記録している番地のようなもので、例えば、チンパンジーの体重はC3を参照すれば良いことになるね。\n\n\n\n表計算ソフトウェアで表データを扱う\n\n\n\n\n先ほど5種の動物のデータフレームを示しましたが、データ分析を進めていくには より多くのデータが必要になります。 たくさんのデータがあれば、データから見えてくる傾向・パターンも見えやすくなります。 ここでは22種の動物について、同様の体長、体重を調べたデータを用意しました。 ここからはこの動物データ (表 2.2) を使い、データを調べていくことにします。 このデータはとくしま動物園で 飼育される動物について記録したものです。詳細は付録データセットで解説しています。\n\n2.2.1 Rでのデータフレーム操作\n動物データはcsvファイルと呼ばれるテキストファイルの一種に記録されたデータです。 csvファイルはデータを記録するためのファイル形式として広く使われるもので、 カンマ , によって変数を区切っていくのが特徴です。 データフレーム同様、個体や観測のデータを一つの行にまとめます。 具体的には動物データの中身は次のようになっています。\ntaxon,name,body_length_cm,weight_kg\n食肉類,レッサーパンダ,63.5,6\n鳥類,ホオジロカンムリヅル,100,3.5\n食肉類,コツメカワウソ,64,5.4\n以下省略...\nRではcsvをはじめとした各種ファイルをデータフレームとして扱うための関数が用意されています。 read.csv()関数でcsvファイルを読み込むには、関数の第一引数にファイルのパス（置き場所）を文字列で与えて実行します。データはdf_zooというオブジェクトに格納され、いつでも表示（参照）できるようになっています。\n\n# dfはデータフレーム(data frame)の頭文字から\n# 動物データの読み込み\ndf_zoo <-\n  read.csv(\"data-raw/tokushima_zoo_animals22.csv\")\n\n\ndf_zoo\n\n\n\n\n表 2.2: 動物データ\n\n\ntaxon\nname\nbody_length_cm\nweight_kg\n\n\n\n\n食肉類\nレッサーパンダ\n63.5\n6.0\n\n\n鳥類\nホオジロカンムリヅル\n100.0\n3.5\n\n\n食肉類\nコツメカワウソ\n64.0\n5.4\n\n\n鳥類\nカナダガン\n110.0\n6.5\n\n\n霊長類\nチンパンジー\n85.0\n60.0\n\n\n霊長類\nシシオザル\n66.0\n10.0\n\n\n霊長類\nマントヒヒ\n80.0\n20.0\n\n\n食肉類\nピューマ\n168.0\n80.0\n\n\n齧歯類\nカピバラ\n134.0\n66.0\n\n\n食肉類\nライオン\n250.0\n225.0\n\n\n鳥類\nアフリカハゲコウ\n130.0\n9.0\n\n\n偶蹄類\nシロオリックス\n175.0\n220.0\n\n\n食肉類\nミーアキャット\n31.0\n0.9\n\n\n食肉類\nシンリンオオカミ\nNA\n30.3\n\n\n鳥類\nアンデスコンドル\n1.2\n15.0\n\n\n食肉類\nホッキョクグマ\n250.0\n410.0\n\n\n霊長類\nリスザル\n35.0\n1.1\n\n\n鳥類\nフンボルトペンギン\n69.0\n6.0\n\n\n鯨偶蹄類\nラマ\nNA\n140.0\n\n\n奇蹄類\nポニー\nNA\nNA\n\n\n齧歯類\nモルモット\n40.0\n1.5\n\n\n鯨偶蹄類\nヒツジ\nNA\nNA\n\n\n\n\n\n\n\n上記のコマンドの実行により、データフレームが出力されたかと思います。 一行目の出力が変数を示しています。これは列の名前（列名）とも呼ばれます。 データフレームをプログラミング言語で扱うときはこの列名にはできるだけ英語やローマ字を使ったものにしましょう。 漢字やひらがなを使うと意味がわかりやすいですが、海外で開発されたRのようなプログラムは日本語の扱いに不自由な点があるためです。 ここでも次のように動物データの列名を日本語から英語に変えてあります。\n\ntaxon: 動物の分類群\nname: 動物の種名\nbody_length_cm: 体長(単位はcm)\nweight_kg: 体重(単位はkg)\n\n変数を参照するにはドル記号 $を使います。\n\n# データフレーム中の変数を参照するにはドル記号 $ に続けて変数名を与えます。\ndf_zoo$name\n\n [1] \"レッサーパンダ\"       \"ホオジロカンムリヅル\" \"コツメカワウソ\"      \n [4] \"カナダガン\"           \"チンパンジー\"         \"シシオザル\"          \n [7] \"マントヒヒ\"           \"ピューマ\"             \"カピバラ\"            \n[10] \"ライオン\"             \"アフリカハゲコウ\"     \"シロオリックス\"      \n[13] \"ミーアキャット\"       \"シンリンオオカミ\"     \"アンデスコンドル\"    \n[16] \"ホッキョクグマ\"       \"リスザル\"             \"フンボルトペンギン\"  \n[19] \"ラマ\"                 \"ポニー\"               \"モルモット\"          \n[22] \"ヒツジ\"              \n\n\nファイルを用意せずに、直接データフレームの生成もできます。 これにはdata.frame()関数とc()関数を使います。 data.frame()関数の引数に変数名 = 値の形式でデータを与えていきます。 文字列の変数は引用符 \" で囲む点、データの区切りにはカンマ , を使う点に注意してください。\n\ndata.frame(\n  taxon = c(\"食肉類\", \"鳥類\", \"食肉類\"),\n  name = c(\"レッサーパンダ\", \"ホオジロカンムリヅル\", \"コツメカワウソ\"),\n  body_length_cm = c(6.0, 3.5, 5.4),\n  weight_kg = c(63.5, 100, 64.0))"
  },
  {
    "objectID": "data.html#まとめと課題",
    "href": "data.html#まとめと課題",
    "title": "2  データの種類と表現方法",
    "section": "2.3 まとめと課題",
    "text": "2.3 まとめと課題\n\nデータをとる対象ごとに得られる、共通の手法によって得られた値のことを変数と呼びます。 変数は性質の違いによって分類できます。身近なものを対象に分類をしてみましょう。"
  },
  {
    "objectID": "data.html#参考文献url",
    "href": "data.html#参考文献url",
    "title": "2  データの種類と表現方法",
    "section": "2.4 参考文献・URL",
    "text": "2.4 参考文献・URL\n\n(北川源四郎 と 内田誠一 2021)\n\n\n\n\n\n北川源四郎竹村彰通 編, と 内田誠一孝忠大輔. 2021. 教養としてのデータサイエンス = Data Science as the Liberal Arts. データサイエンス入門シリーズ. 講談社. http://id.ndl.go.jp/bib/031484010."
  },
  {
    "objectID": "summary_statistics.html",
    "href": "summary_statistics.html",
    "title": "3  データの特徴を捉える",
    "section": "",
    "text": "データ分析の目的の一つに「データを要約すること」があることを示しました。 それでは実際に、データの要約に取り組んでみましょう。 例として動物データの体長を表示します。\nこのデータの特徴として言えることは何でしょうか？ 動物データに含まれるわずか22件の数値でも、こうした数値の羅列からデータの特徴を説明することは困難です。 データ分析で扱うデータの件数は数千、数万となる場合もあり、一つ一つデータを見ていくことも 現実的ではありません。 そこでデータを要約するために代表値の計算やデータの可視化が行われます。"
  },
  {
    "objectID": "summary_statistics.html#データの分布",
    "href": "summary_statistics.html#データの分布",
    "title": "3  データの特徴を捉える",
    "section": "3.1 データの分布",
    "text": "3.1 データの分布\nデータの分布を明らかにする。\nある値がデータに含まれる数を度数どすうまたは頻度ひんどといいます。 動物のデータセットの分類群に対して度数を求めると次のようになります。\n\n\nコードを表示\n# 度数、頻度を英語で frequency といいます\ncount(df_zoo, taxon, name = \"frequency\") |>\n  knitr::kable()\n\n\n\n\n\ntaxon\nfrequency\n\n\n\n\n偶蹄類\n1\n\n\n奇蹄類\n1\n\n\n霊長類\n4\n\n\n食肉類\n7\n\n\n鯨偶蹄類\n2\n\n\n鳥類\n5\n\n\n齧歯類\n2\n\n\n\n\n\n対象が量的変数の場合は頻度を簡単に求めることができます。 それでは量的変数、特に連続変数に対し度数を求めるにはどうすれば良いでしょうか。 量的変数に対して連続変数では同じ値をとることが少ないです。 そのため連続変数の度数を求めるときは、変数がとり得る値をいくつかの階級に分けて考えます。\n階級分けのために、まずは変数の最小値と最大値を調べましょう。 最小値と最大値はそれぞれmin()関数とmax()関数に対象の変数を与えることで求められます。\n\n# 動物データの体長について最小値・最大値を求める\nmin(df_zoo$body_length_cm, na.rm = TRUE)\n\n[1] 1.2\n\nmax(df_zoo$body_length_cm, na.rm = TRUE)\n\n[1] 250\n\n\n最小値・最大値を一度に求めるためのrange()関数も同様に扱えます。\n\nrange(df_zoo$body_length_cm, na.rm = TRUE)\n\n[1]   1.2 250.0\n\n\n最小値と最大値がわかったところで、次は階級を設定します。\nデータ中の度数をまとめて表形式にしたものは度数分布表と呼ばれます。\n分類群の値ごとに同じデータがどれだけあるかをカウントして度数を求めます。\n度数分布表は手元のデータの値をいくつかの階級 (class)\n数学は統計学的な考え方において必須ではありません。\n探索的データ分析\n度数分布表、ヒストグラム、箱ヒゲ図、散布図、カルトグラム\n\n3.1.1 ヒストグラム\n代表値に対して、データを図で表現する方法を解説します。 ヒストグラム、箱ヒゲ図、散布図は数値を図で表すための方法として用いられます。\n度数分布をグラフ化する方法の一つとしてヒストグラムがあります。\n\n\nコードを表示\nlibrary(ggplot2)\nlibrary(ragg)\n\ndf_zoo |> \n  ggplot(aes(body_length_cm)) +\n  geom_histogram(bins = 6)\n\n\n\n\n\n動物の体長のヒストグラム\n\n\n\n\n\n\n\n\n\n\n\n階級幅の異なるヒストグラム\n\n\n\n階級の幅が一定でないヒストグラムが存在するよ。\n\n\nデータに対する説得力を増すためにも使われます。\nデータの特徴を素早く捉えることができます。"
  },
  {
    "objectID": "summary_statistics.html#代表値",
    "href": "summary_statistics.html#代表値",
    "title": "3  データの特徴を捉える",
    "section": "3.2 代表値",
    "text": "3.2 代表値\nまず、複数の数値の性質や特徴をよく表す代表値について説明します。 代表値によるデータの要約は、データに含まれる数値の傾向を大まかに把握するために便利です。 代表値という名前の通り、数値によるデータの表現方法となります。\n代表値によるデータの要約方法にはさまざまなものがあります。代表的なものは平均値の計算です。 平均値の他に中央値、最頻値が代表値としてしばしば使われます。 いくつかの代表値を紹介します。 その特徴をみていきましょう。\n\n3.2.1 データの位置を示す代表値: 平均値、中央値、最頻値\n量的変数はデータを度数分布表やヒストグラムに表わすことで、 その分布の形を調べることができます。\n分布の位置を示す代表値として広く用いられるものに、平均値、中央値、最頻値の3つがあります。\nまず、代表値の代表として平均値を紹介します。 平均値にも複数の種類が存在しますが、ここではより一般的な算術平均を平均値の例として扱います。算術平均とは、2個以上のデータ（データの数を\\(N\\)とします）があるとき、そのすべての数値を足し合わせて\\(N\\)で割った値のことです。\n\n# 1,3,5,7,10の平均を求めましょう\nx <- c(1, 10, 5, 3, 7)\n# まずは対象の数値を足し合わせます\nsum(x)\n\n[1] 26\n\n# 次に数値の数(5)によって足し合わせた数値を割り算します\nsum(x) / length(x)\n\n[1] 5.2\n\n# mean()関数を用いて平均値を計算することもできます。\nmean(x)\n\n[1] 5.2\n\n\n平均値はその言葉の通り、データの真ん中あたりを示す代表値です。 しかし、「あたり」という点に注意してください。 平均値は必ずしもデータの真ん中を示す値ではありません。\n中央値は、すべてのデータを大きさの順番に並べたとき、大きい方と小さい方のちょうど真ん中にくる値を指します。 例えば得られている数値が1, 10, 5, 3, 7の場合には数値の数は5個なので、その真ん中の順位は3になります。 この真ん中の順位にくる数値を中央値とします。\n\n\nコードを表示\n# xの数値は大きさの順番になっていないので並び替える\nsort(x)\n\n\n[1]  1  3  5  7 10\n\n\nコードを表示\nsort(x)[3]\n\n\n[1] 5\n\n\nコードを表示\nmedian(x)\n\n\n[1] 5\n\n\n一方、数値の個数が偶数のときには真ん中の数を決めるのに悩んでしまいます。 例えば4つの数値からなるデータの中央値を求めようとすると、真ん中は2.5番目となってしまいます。データの中には2.5番目の値は含まれません。 このときは2番目と3番目の値の平均を中央値として利用します。\n\n\nコードを表示\n# データの個数が偶数の場合の中央値の求め方\nx <- c(1, 2, 4, 6)\n\nmean(c(x[2], x[3]))\n\n\n[1] 3\n\n\nコードを表示\n# median()関数で中央値を求められる\nmedian(x)\n\n\n[1] 3\n\n\n最頻値はデータの中で最も頻繁に出現する値のことを言います。 クラスのテストの点数で、96点の人が3人と最も多かったとき、最頻値は96です。ただし92点の人が同様に3人いたときには96、92が最頻値となります。\n\n\nコードを表示\nx <- \n  c(73, 58, 96, 61, 87, 54, 92, 92, 63, 80,\n    92, 59, 77, 96, 62, 64, 64, 59, 76, 96)\n\n# 各点数の人数を求めます\ntable(x)\n\n\nx\n54 58 59 61 62 63 64 73 76 77 80 87 92 96 \n 1  1  2  1  1  1  2  1  1  1  1  1  3  3 \n\n\nコードを表示\n# 最頻値を求めます\nnames(which(table(x) == max(table(x))))\n\n\n[1] \"92\" \"96\"\n\n\n上記の例は変数が離散変数の場合の最頻値の求め方でした。 連続変数の場合も手順は変わりませんが、数値を適当な間隔でまとめた階級により判断することがあります。\n\n\n\n\n\n\n\n動物データの代表値を計算しよう\n\n\n\n動物データに対して平均値や中央値、最頻値を求めてみよう。 Rにはここで紹介したmean()やmedian()以外にも 代表値の算出を行う関数が用意されているよ。 それらについて調べて実行してみよう。\nコードの例と解説は練習問題をみてね。\n\n\n\n\n3.2.2 データのばらつき\n分散、標準偏差"
  },
  {
    "objectID": "summary_statistics.html#データのばらつき-1",
    "href": "summary_statistics.html#データのばらつき-1",
    "title": "3  データの特徴を捉える",
    "section": "3.3 データのばらつき",
    "text": "3.3 データのばらつき\nパーセンタイル、誤差\n\n3.3.1 箱ヒゲ図\n中央値を太い線で描く\n箱\n箱から髭ひげが伸びているような図であることから箱ヒゲ図と呼ばれます。\n\n\nコードを表示\ndf_zoo |> \n  ggplot(aes(y = body_length_cm)) +\n  geom_boxplot()\n\n\n\n\n\nコードを表示\n# 分類群ごとの箱ヒゲ図を描画\n# あらかじめ中央値を計算し、グラフ上では中央値の並びで分類群が表示されるように\n# 調整しています。\ndf_zoo |> \n  filter(!is.na(body_length_cm)) |> \n  group_by(taxon) |> \n  mutate(body_length_median = median(body_length_cm)) |> \n  ungroup() |> \n  mutate(taxon = forcats::fct_reorder(taxon, body_length_median)) |> \n  ggplot(aes(taxon, body_length_cm)) +\n  geom_boxplot()"
  },
  {
    "objectID": "summary_statistics.html#相関-2つの変数の間の関係",
    "href": "summary_statistics.html#相関-2つの変数の間の関係",
    "title": "3  データの特徴を捉える",
    "section": "3.4 相関: 2つの変数の間の関係",
    "text": "3.4 相関: 2つの変数の間の関係\n相関係数\n相関係数は変数間の因果関係を示すものではありません。 例えば、ある地域の８月において、毎日のアイスの売り上げ個数と熱中症患者数の間に 正の相関があった場合でも、アイスが熱中症の原因となっているわけではありません。 アイスの売り上げ、熱中症の双方に影響するもの、気温が原因です。 気温について考慮せずに分析を進めてしまうと、見せかけの因果関係を発生させてしまいます。 熱中症患者の増加を抑えるためにアイスの販売を規制するなどの誤った対策が取られてしまう 恐れがあります。"
  },
  {
    "objectID": "summary_statistics.html#参考文献url",
    "href": "summary_statistics.html#参考文献url",
    "title": "3  データの特徴を捉える",
    "section": "3.5 参考文献・URL",
    "text": "3.5 参考文献・URL\n\n(日本統計学会 2020)\n\n\n\n\n\n日本統計学会. 2020. データの分析 : 日本統計学会公式認定統計検定3級対応. 改訂版. 東京図書. http://id.ndl.go.jp/bib/030221455."
  },
  {
    "objectID": "correlation.html",
    "href": "correlation.html",
    "title": "4  相関: 2変数の関係を調べる",
    "section": "",
    "text": "前章では、動物の体長や体重といった1つの変数を扱う方法を紹介しました。 この章では、体長と体重、体重と分類群を一度に考える、つまり2変数の関係を見ていくことにします。 まずは関係という言葉自体について、データ分析の視点で扱われる2つの関係を説明します。"
  },
  {
    "objectID": "correlation.html#データ分析における2つの関係",
    "href": "correlation.html#データ分析における2つの関係",
    "title": "4  相関: 2変数の関係を調べる",
    "section": "4.1 データ分析における2つの関係",
    "text": "4.1 データ分析における2つの関係\nデータ分析における「関係」は複数の変数がともに変化する状態を指します。 関係を扱うときには次に説明する因果関係と相関そうかん関係の2種類があり、似たものでありながら異なる状態を示すもので注意が必要です。\n本書の冒頭、データ分析の目的の中でみたように、 「ペンギンは翼の長さが大きい個体であれば口ばしの長さも大きくなる」はペンギンの体の部位の関係を示すものです。 こうした変数の間の関連性を相関関係といいます。 一方で、翼が長くなると口ばしが大きくなる、とするわけではありません。 逆も然りで、口ばしが大きくなれば翼が長くなるわけでもありません。 つまり、翼と口ばしの長さは、どちらかが大きくなればどちらかが大きくなることを説明するものではありません。 このような原因から結果を伴う状態を因果関係と言います。原因と結果の関係とも言えます。\nペンギンデータは野外に生息するペンギン個体の観測により得られたデータです。 各個体はここで観測していない年齢や食事の内容も異なるはずです。 その場合、翼や口ばしの長さに対する影響も当然変わると考えられます。 2つの変数の関連性は明らかですが、片方の変数が原因となり、もう片方の変数の値を決めている、 因果関係があるとは言えないのです。\n因果関係を明らかにするのは容易ではありません。\n因果関係がないものに因果関係を見出すことの危険性\n擬似相関 … ２つの変数に因果関係がないのに、見えない要因によって因果関係があるかのように推測されること\n擬似相関の例として有名な話があります。 ある街でのアイスクリームの売り上げが最も高い時期には、熱中症の搬送者数も最も多いことが指摘されました。 この時、アイスクリームの売り上げ増が熱中症の原因（あるいは結果）であると主張されましたが、 アイスクリームの売り上げや熱中症の増加も実際には、気温の高さが原因となっています。 気温について無視し、2つの変数の関係を議論すること、特に因果関係の有無を判断することは危険です。 ここでの気温のような観測されていない変数を潜在変数といいます。"
  },
  {
    "objectID": "correlation.html#相関",
    "href": "correlation.html#相関",
    "title": "4  相関: 2変数の関係を調べる",
    "section": "4.2 相関",
    "text": "4.2 相関\n2つの量的変数の関係性を明らかにするために、相関という考え方を導入します。 ペンギンデータでは翼と口ばしの長さの関係を見ました。 これらの変数のように、互いの値が増えれば片方も増えるという傾向を示す関係を正の相関関係といいます。 一方、片方の変数の値が増えたときにもう片方の値が減少する場合、負の相関関係があるといいます。 この2つの関係に加えて、相関にはもう一つの関係があります。 それは変数の間に関係が見られない状態です。このことを無相関と呼びます。\n変数間の相関関係はグラフ上に表現すると傾向を掴みやすくなります。 散布図と呼ばれる2つの変数を扱うグラフを利用して相関関係を整理してみましょう1。 (fig_correlation?) に相関関係を表わす3つの状態を示しました。\n\n\nコードを表示\nlibrary(ggplot2)\nlibrary(patchwork)\nset.seed(123)\ndf_corr <- \n  tibble::tibble(\n  x = rnorm(100),\n  y = rnorm(100),\n  y_positive = 5 * x + rnorm(100, sd = 3),\n  y_negative = -5 * x + rnorm(100, sd = 4))\n\np1 <- \n  df_corr |> \n  ggplot(aes(x, y_positive)) +\n  geom_point() +\n  ylab(\"y\") +\n  labs(title = \"正の相関関係\")\np2 <- \n  df_corr |>  \n  ggplot(aes(x, y)) +\n  geom_point() +\n  labs(title = \"無相関\")\np3 <- \n  df_corr |> \n  ggplot(aes(x, y_negative)) +\n  geom_point() +\n  ylab(\"y\") +\n  labs(title = \"負の相関関係\")\n\np1 + p2 + p3 + \n  plot_layout(ncol = 3)\n\n\n\n\n\n相関関係を示す3つの状態\n\n\n\n\n回帰モデルにつながる\n\n4.2.1 相関係数\n相関係数は2つの変数の間の関係性の強さを評価する指標です。 -1以上から1以下の値をとり、変数の関係が強いほど、散布図にしたときに直線関係に近いものほど、絶対値が1に近づきます。\n相関係数にはいくつかの種類があり、中でもピアソンの積率相関係数が最も頻繁に利用されます2。 本書でも、相関係数といった時にはピアソンの積率相関係数を指して使います。\n共分散… データの測定単位に依存\n\n\n\n\n\n\n相関係数の注意点\n\n\n\n相関係数はあくまでも変数の関係が直線関係にあることを仮定しているよ。 だから2変数間の関係が直線的でないときは適切な計算が行えないんだ。\nまた、相関係数は外れ値の影響を受けやすいよ。 外れ値とはデータに含まれる極端に小さい・大きい値のことだよ。\n\n\nRでは相関係数の算出をcor.test()関数によって行います。\n(fig_correlation?) で示した3つの状態について、それぞれ相関係数を算出すると次の値になります。\n\ncor.test(formula = ~ x + y_positive, data = df_corr) # 正の相関関係\n\n\n    Pearson's product-moment correlation\n\ndata:  x and y_positive\nt = 14.7, df = 98, p-value < 2.2e-16\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.7562318 0.8821464\nsample estimates:\n     cor \n0.829446 \n\ncor.test(formula = ~ x + y, data = df_corr) # 無相関\n\n\n    Pearson's product-moment correlation\n\ndata:  x and y\nt = -0.49095, df = 98, p-value = 0.6246\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n -0.2435805  0.1483291\nsample estimates:\n        cor \n-0.04953215 \n\ncor.test(formula = ~ x + y_negative, data = df_corr) # 負の相関関係\n\n\n    Pearson's product-moment correlation\n\ndata:  x and y_negative\nt = -11.321, df = 98, p-value < 2.2e-16\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n -0.8269376 -0.6529155\nsample estimates:\n       cor \n-0.7527922 \n\n\n\n\nコードを表示\n# 相関係数はデータの測定単位に依存しない\ncor.test(scale(df_zoo$body_length_cm), \n         scale(df_zoo$weight_kg))\n\n\n\n    Pearson's product-moment correlation\n\ndata:  scale(df_zoo$body_length_cm) and scale(df_zoo$weight_kg)\nt = 6.2796, df = 16, p-value = 1.098e-05\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.6211387 0.9401080\nsample estimates:\n      cor \n0.8434235 \n\n\n\n\nコードを表示\n# 動物データについて相関係数を求める\n#| eval: false\ncor.test(df_zoo$body_length_cm, df_zoo$weight_kg)\n\n\n\n    Pearson's product-moment correlation\n\ndata:  df_zoo$body_length_cm and df_zoo$weight_kg\nt = 6.2796, df = 16, p-value = 1.098e-05\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.6211387 0.9401080\nsample estimates:\n      cor \n0.8434235 \n\n\nどんな変数間であろうと相関係数は必ず出る\n相関係数は標準化された値どうしの共分散とも考えられる\n外れ値が相関係数に及ぼす影響"
  },
  {
    "objectID": "correlation.html#クロス集計表",
    "href": "correlation.html#クロス集計表",
    "title": "4  相関: 2変数の関係を調べる",
    "section": "4.3 クロス集計表",
    "text": "4.3 クロス集計表\n質的変数の変数間の関係を調べる方法を紹介します。 ペンギンデータには、種の名前 species、生育する島の名前 island、性別 sex の3つの質的変数があります。 これらの質的変数間の関係を調べるためにクロス集計表を用います。\nクロス集計表では、対象の質的変数に含まれる件数をカウントし、表にまとめます。 表の行・列には変数の項目が並びます。 表 4.1 にペンギンデータにおける島ごとの種数を整理しました。\n\n\nコードを表示\nlibrary(dplyr)\nlibrary(palmerpenguins)\npenguins |> \n  count(species, island) |> \n  tidyr::pivot_wider(names_from = island, values_from = n, values_fill = 0)\n\n\n\n\n\n表 4.1: ペンギンデータにおける島ごとの種数\n\n\nspecies\nBiscoe\nDream\nTorgersen\n\n\n\n\nAdelie\n44\n56\n52\n\n\nChinstrap\n0\n68\n0\n\n\nGentoo\n124\n0\n0\n\n\n\n\n\n\n\nこの表を見るだけで次の事柄がわかります。\n\nアデリーペンギン Adelie は調査地のどの島にも生育する\nヒゲペンギン Chinstrap はDream島にだけ生育する\nジェンツーペンギン Gentoo はBiscoe島に多いがDreamやTorgersenには生育しない\n\nクロス集計表の利用によって1変数を調べただけではわからなかったデータの特徴を知ることができました。"
  },
  {
    "objectID": "correlation.html#参考文献url",
    "href": "correlation.html#参考文献url",
    "title": "4  相関: 2変数の関係を調べる",
    "section": "4.4 参考文献・URL",
    "text": "4.4 参考文献・URL\n\n(日本統計学会 2020)\n(阿部真人 2021)\n\n\n\n\n\n日本統計学会. 2020. データの分析 : 日本統計学会公式認定統計検定3級対応. 改訂版. 東京図書. http://id.ndl.go.jp/bib/030221455.\n\n\n阿部真人. 2021. 統計学入門 : データ分析に必須の知識・考え方 : 仮説検定から統計モデリングまで重要トピックを完全網羅. ソシム. http://id.ndl.go.jp/bib/031803943."
  },
  {
    "objectID": "visualization.html",
    "href": "visualization.html",
    "title": "5  グラフの作成",
    "section": "",
    "text": "コードを表示\nlibrary(ggplot2)"
  },
  {
    "objectID": "visualization.html#探索的データ解析",
    "href": "visualization.html#探索的データ解析",
    "title": "5  グラフの作成",
    "section": "5.1 探索的データ解析",
    "text": "5.1 探索的データ解析\n第二次世界大戦の後、1977年にジョン・テューキーが著書「Exploratory Data Analysis」のなかで探索的データ解析の重要性を説きました。\nデータ解析の第一歩は計算ではない\n視覚化がモデル構築の足がかりになる\nデータをグラフに表現するでは、ヒストグラムと箱ヒゲ図を紹介しました。"
  },
  {
    "objectID": "visualization.html#変数のデータの要約",
    "href": "visualization.html#変数のデータの要約",
    "title": "5  グラフの作成",
    "section": "5.2 1変数のデータの要約",
    "text": "5.2 1変数のデータの要約\n代表値、ヒストグラムや箱ヒゲ図による表現から一歩進んで\nドット、蜂群、ヴァイオリンプロット、Sina、ハイブリッド、雨雲プロット"
  },
  {
    "objectID": "visualization.html#棒グラフ",
    "href": "visualization.html#棒グラフ",
    "title": "5  グラフの作成",
    "section": "5.3 棒グラフ",
    "text": "5.3 棒グラフ\n棒グラフはデータの大小を棒の高さで比較するグラフの種類です。"
  },
  {
    "objectID": "visualization.html#折れ線グラフ",
    "href": "visualization.html#折れ線グラフ",
    "title": "5  グラフの作成",
    "section": "5.4 折れ線グラフ",
    "text": "5.4 折れ線グラフ"
  },
  {
    "objectID": "visualization.html#散布図",
    "href": "visualization.html#散布図",
    "title": "5  グラフの作成",
    "section": "5.5 散布図",
    "text": "5.5 散布図\n相関を調べる際に散布図を用いる\n2つの量的変数を縦軸と横軸\nDatasaurusの紹介。相関係数や回帰直線が同じであっても散布図の形状が異なる。\nアンスコムの例\n\n\nコードを表示\nanscombe\n\n\n\n\n\n\nx1\nx2\nx3\nx4\ny1\ny2\ny3\ny4\n\n\n\n\n10\n10\n10\n8\n8.04\n9.14\n7.46\n6.58\n\n\n8\n8\n8\n8\n6.95\n8.14\n6.77\n5.76\n\n\n13\n13\n13\n8\n7.58\n8.74\n12.74\n7.71\n\n\n9\n9\n9\n8\n8.81\n8.77\n7.11\n8.84\n\n\n11\n11\n11\n8\n8.33\n9.26\n7.81\n8.47\n\n\n14\n14\n14\n8\n9.96\n8.10\n8.84\n7.04\n\n\n6\n6\n6\n8\n7.24\n6.13\n6.08\n5.25\n\n\n4\n4\n4\n19\n4.26\n3.10\n5.39\n12.50\n\n\n12\n12\n12\n8\n10.84\n9.13\n8.15\n5.56\n\n\n7\n7\n7\n8\n4.82\n7.26\n6.42\n7.91\n\n\n5\n5\n5\n8\n5.68\n4.74\n5.73\n6.89\n\n\n\n\n\n\n\n\nコードを表示\nanscombe_long <- \n  anscombe |> \n  tidyr::pivot_longer(\n    tidyselect::everything(),\n    names_to = c(\".value\", \"set\"),\n    names_pattern = \"(.)(.)\")\n\n# anscombe_long |> \n#   dplyr::filter(set == 1) |> \n#   ggplot(aes(x, y)) +\n#   geom_point(color = \"orange\") +\n#   geom_smooth(method = lm, se = FALSE)\n\n\n\n\nコードを表示\nlibrary(datasauRus)"
  },
  {
    "objectID": "visualization.html#地図表現",
    "href": "visualization.html#地図表現",
    "title": "5  グラフの作成",
    "section": "5.6 地図表現",
    "text": "5.6 地図表現\n\n\n\nコードを表示\nlibrary(sf)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthhires)\nlibrary(dplyr)\n\n\n\n\nコードを表示\ndf_countries <-\n  countrycode::codelist |>\n  select(iso2c, cldr.name.ja) |>\n  janitor::clean_names()\n\nne_world <-\n  rnaturalearth::ne_countries(scale = 10, returnclass = \"sf\") |>\n  select(admin, name, pop_est, pop_year, iso_a2, continent)\n\nsf_zoo_conservation <- \n  ne_world |> \n  left_join(df_zoo_conservation |> \n              filter(name == \"フンボルトペンギン\") |> \n              tidyr::unnest(cols = occ) |> \n              select(code, presence),\n            by = c(\"iso_a2\" = \"code\")) |> \n  mutate(presence = tidyr::replace_na(presence, \"Absence\"))\n\n\n動物の分布を示す地図を作成してみましょう。\n\n\nコードを表示\nggplot() +\n  geom_sf(data = sf_zoo_conservation, \n          aes(fill = presence), \n          size = 0.001) +\n  scale_fill_viridis_d()\n\n\n\n\n\n\n\nコードを表示\nlibrary(mapview)\n\n\n\n\nコードを表示\nmapview(sf_zoo_conservation, \n                 zcol = \"presence\")"
  },
  {
    "objectID": "visualization.html#参考文献url",
    "href": "visualization.html#参考文献url",
    "title": "5  グラフの作成",
    "section": "5.7 参考文献・URL",
    "text": "5.7 参考文献・URL"
  },
  {
    "objectID": "regression.html",
    "href": "regression.html",
    "title": "6  回帰問題に挑戦",
    "section": "",
    "text": "コードを表示\nlibrary(palmerpenguins)\n相関では2つの量的変数の関係を分析する方法として相関係数や散布図を紹介しました。\n回帰とは \\(y = f(x)\\)\n関数によって変数の間の関係を定式化\n変数の関係を理解、\n予測ができるようになります。\n\\(x\\)を説明変数、\\(y\\)を目的変数と呼びます。"
  },
  {
    "objectID": "regression.html#単回帰モデル",
    "href": "regression.html#単回帰モデル",
    "title": "6  回帰問題に挑戦",
    "section": "6.1 単回帰モデル",
    "text": "6.1 単回帰モデル\n\n\nコードを表示\nlm_res <- \n  lm(weight_kg ~ body_length_cm, data = df_zoo)\nlm_res\n\n\n\nCall:\nlm(formula = weight_kg ~ body_length_cm, data = df_zoo)\n\nCoefficients:\n   (Intercept)  body_length_cm  \n       -72.574           1.324  \n\n\nコードを表示\nsummary(lm_res)\n\n\n\nCall:\nlm(formula = weight_kg ~ body_length_cm, data = df_zoo)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-90.587 -37.539  -6.151  25.768 151.495 \n\nCoefficients:\n               Estimate Std. Error t value Pr(>|t|)    \n(Intercept)    -72.5743    26.0890  -2.782   0.0133 *  \nbody_length_cm   1.3243     0.2109   6.280  1.1e-05 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 61.48 on 16 degrees of freedom\n  (4 observations deleted due to missingness)\nMultiple R-squared:  0.7114,    Adjusted R-squared:  0.6933 \nF-statistic: 39.43 on 1 and 16 DF,  p-value: 1.098e-05\n\n\n\n6.1.1 最小二乗法\n次に示すのは南極大陸に生育するペンギンの大きさを調べた観測データです。 それぞれの変数は次の意味をもちます（詳細は付録のデータセットを参照してください）。\n\nspecies: ペンギンの種類（種名）\nbill_length_mm: 口ばしの長さ。単位はミリメートル\nbody_mass_g: 体重。単位はグラム\n\n\n\n\n\n\n\nspecies\nbill_length_mm\nbody_mass_g\n\n\n\n\nAdelie\n39.1\n3750\n\n\nAdelie\n39.5\n3800\n\n\nAdelie\n40.3\n3250\n\n\nAdelie\nNA\nNA\n\n\nAdelie\n36.7\n3450\n\n\nAdelie\n39.3\n3650\n\n\nAdelie\n38.9\n3625\n\n\nAdelie\n39.2\n4675\n\n\nAdelie\n34.1\n3475\n\n\nAdelie\n42.0\n4250\n\n\nAdelie\n37.8\n3300\n\n\nAdelie\n37.8\n3700\n\n\nAdelie\n41.1\n3200\n\n\nAdelie\n38.6\n3800\n\n\nAdelie\n34.6\n4400\n\n\nAdelie\n36.6\n3700\n\n\nAdelie\n38.7\n3450\n\n\nAdelie\n42.5\n4500\n\n\nAdelie\n34.4\n3325\n\n\nAdelie\n46.0\n4200\n\n\nAdelie\n37.8\n3400\n\n\nAdelie\n37.7\n3600\n\n\nAdelie\n35.9\n3800\n\n\nAdelie\n38.2\n3950\n\n\nAdelie\n38.8\n3800\n\n\nAdelie\n35.3\n3800\n\n\nAdelie\n40.6\n3550\n\n\nAdelie\n40.5\n3200\n\n\nAdelie\n37.9\n3150\n\n\nAdelie\n40.5\n3950\n\n\nAdelie\n39.5\n3250\n\n\nAdelie\n37.2\n3900\n\n\nAdelie\n39.5\n3300\n\n\nAdelie\n40.9\n3900\n\n\nAdelie\n36.4\n3325\n\n\nAdelie\n39.2\n4150\n\n\nAdelie\n38.8\n3950\n\n\nAdelie\n42.2\n3550\n\n\nAdelie\n37.6\n3300\n\n\nAdelie\n39.8\n4650\n\n\nAdelie\n36.5\n3150\n\n\nAdelie\n40.8\n3900\n\n\nAdelie\n36.0\n3100\n\n\nAdelie\n44.1\n4400\n\n\nAdelie\n37.0\n3000\n\n\nAdelie\n39.6\n4600\n\n\nAdelie\n41.1\n3425\n\n\nAdelie\n37.5\n2975\n\n\nAdelie\n36.0\n3450\n\n\nAdelie\n42.3\n4150\n\n\nAdelie\n39.6\n3500\n\n\nAdelie\n40.1\n4300\n\n\nAdelie\n35.0\n3450\n\n\nAdelie\n42.0\n4050\n\n\nAdelie\n34.5\n2900\n\n\nAdelie\n41.4\n3700\n\n\nAdelie\n39.0\n3550\n\n\nAdelie\n40.6\n3800\n\n\nAdelie\n36.5\n2850\n\n\nAdelie\n37.6\n3750\n\n\nAdelie\n35.7\n3150\n\n\nAdelie\n41.3\n4400\n\n\nAdelie\n37.6\n3600\n\n\nAdelie\n41.1\n4050\n\n\nAdelie\n36.4\n2850\n\n\nAdelie\n41.6\n3950\n\n\nAdelie\n35.5\n3350\n\n\nAdelie\n41.1\n4100\n\n\nAdelie\n35.9\n3050\n\n\nAdelie\n41.8\n4450\n\n\nAdelie\n33.5\n3600\n\n\nAdelie\n39.7\n3900\n\n\nAdelie\n39.6\n3550\n\n\nAdelie\n45.8\n4150\n\n\nAdelie\n35.5\n3700\n\n\nAdelie\n42.8\n4250\n\n\nAdelie\n40.9\n3700\n\n\nAdelie\n37.2\n3900\n\n\nAdelie\n36.2\n3550\n\n\nAdelie\n42.1\n4000\n\n\nAdelie\n34.6\n3200\n\n\nAdelie\n42.9\n4700\n\n\nAdelie\n36.7\n3800\n\n\nAdelie\n35.1\n4200\n\n\nAdelie\n37.3\n3350\n\n\nAdelie\n41.3\n3550\n\n\nAdelie\n36.3\n3800\n\n\nAdelie\n36.9\n3500\n\n\nAdelie\n38.3\n3950\n\n\nAdelie\n38.9\n3600\n\n\nAdelie\n35.7\n3550\n\n\nAdelie\n41.1\n4300\n\n\nAdelie\n34.0\n3400\n\n\nAdelie\n39.6\n4450\n\n\nAdelie\n36.2\n3300\n\n\nAdelie\n40.8\n4300\n\n\nAdelie\n38.1\n3700\n\n\nAdelie\n40.3\n4350\n\n\nAdelie\n33.1\n2900\n\n\nAdelie\n43.2\n4100\n\n\nAdelie\n35.0\n3725\n\n\nAdelie\n41.0\n4725\n\n\nAdelie\n37.7\n3075\n\n\nAdelie\n37.8\n4250\n\n\nAdelie\n37.9\n2925\n\n\nAdelie\n39.7\n3550\n\n\nAdelie\n38.6\n3750\n\n\nAdelie\n38.2\n3900\n\n\nAdelie\n38.1\n3175\n\n\nAdelie\n43.2\n4775\n\n\nAdelie\n38.1\n3825\n\n\nAdelie\n45.6\n4600\n\n\nAdelie\n39.7\n3200\n\n\nAdelie\n42.2\n4275\n\n\nAdelie\n39.6\n3900\n\n\nAdelie\n42.7\n4075\n\n\nAdelie\n38.6\n2900\n\n\nAdelie\n37.3\n3775\n\n\nAdelie\n35.7\n3350\n\n\nAdelie\n41.1\n3325\n\n\nAdelie\n36.2\n3150\n\n\nAdelie\n37.7\n3500\n\n\nAdelie\n40.2\n3450\n\n\nAdelie\n41.4\n3875\n\n\nAdelie\n35.2\n3050\n\n\nAdelie\n40.6\n4000\n\n\nAdelie\n38.8\n3275\n\n\nAdelie\n41.5\n4300\n\n\nAdelie\n39.0\n3050\n\n\nAdelie\n44.1\n4000\n\n\nAdelie\n38.5\n3325\n\n\nAdelie\n43.1\n3500\n\n\nAdelie\n36.8\n3500\n\n\nAdelie\n37.5\n4475\n\n\nAdelie\n38.1\n3425\n\n\nAdelie\n41.1\n3900\n\n\nAdelie\n35.6\n3175\n\n\nAdelie\n40.2\n3975\n\n\nAdelie\n37.0\n3400\n\n\nAdelie\n39.7\n4250\n\n\nAdelie\n40.2\n3400\n\n\nAdelie\n40.6\n3475\n\n\nAdelie\n32.1\n3050\n\n\nAdelie\n40.7\n3725\n\n\nAdelie\n37.3\n3000\n\n\nAdelie\n39.0\n3650\n\n\nAdelie\n39.2\n4250\n\n\nAdelie\n36.6\n3475\n\n\nAdelie\n36.0\n3450\n\n\nAdelie\n37.8\n3750\n\n\nAdelie\n36.0\n3700\n\n\nAdelie\n41.5\n4000\n\n\nGentoo\n46.1\n4500\n\n\nGentoo\n50.0\n5700\n\n\nGentoo\n48.7\n4450\n\n\nGentoo\n50.0\n5700\n\n\nGentoo\n47.6\n5400\n\n\nGentoo\n46.5\n4550\n\n\nGentoo\n45.4\n4800\n\n\nGentoo\n46.7\n5200\n\n\nGentoo\n43.3\n4400\n\n\nGentoo\n46.8\n5150\n\n\nGentoo\n40.9\n4650\n\n\nGentoo\n49.0\n5550\n\n\nGentoo\n45.5\n4650\n\n\nGentoo\n48.4\n5850\n\n\nGentoo\n45.8\n4200\n\n\nGentoo\n49.3\n5850\n\n\nGentoo\n42.0\n4150\n\n\nGentoo\n49.2\n6300\n\n\nGentoo\n46.2\n4800\n\n\nGentoo\n48.7\n5350\n\n\nGentoo\n50.2\n5700\n\n\nGentoo\n45.1\n5000\n\n\nGentoo\n46.5\n4400\n\n\nGentoo\n46.3\n5050\n\n\nGentoo\n42.9\n5000\n\n\nGentoo\n46.1\n5100\n\n\nGentoo\n44.5\n4100\n\n\nGentoo\n47.8\n5650\n\n\nGentoo\n48.2\n4600\n\n\nGentoo\n50.0\n5550\n\n\nGentoo\n47.3\n5250\n\n\nGentoo\n42.8\n4700\n\n\nGentoo\n45.1\n5050\n\n\nGentoo\n59.6\n6050\n\n\nGentoo\n49.1\n5150\n\n\nGentoo\n48.4\n5400\n\n\nGentoo\n42.6\n4950\n\n\nGentoo\n44.4\n5250\n\n\nGentoo\n44.0\n4350\n\n\nGentoo\n48.7\n5350\n\n\nGentoo\n42.7\n3950\n\n\nGentoo\n49.6\n5700\n\n\nGentoo\n45.3\n4300\n\n\nGentoo\n49.6\n4750\n\n\nGentoo\n50.5\n5550\n\n\nGentoo\n43.6\n4900\n\n\nGentoo\n45.5\n4200\n\n\nGentoo\n50.5\n5400\n\n\nGentoo\n44.9\n5100\n\n\nGentoo\n45.2\n5300\n\n\nGentoo\n46.6\n4850\n\n\nGentoo\n48.5\n5300\n\n\nGentoo\n45.1\n4400\n\n\nGentoo\n50.1\n5000\n\n\nGentoo\n46.5\n4900\n\n\nGentoo\n45.0\n5050\n\n\nGentoo\n43.8\n4300\n\n\nGentoo\n45.5\n5000\n\n\nGentoo\n43.2\n4450\n\n\nGentoo\n50.4\n5550\n\n\nGentoo\n45.3\n4200\n\n\nGentoo\n46.2\n5300\n\n\nGentoo\n45.7\n4400\n\n\nGentoo\n54.3\n5650\n\n\nGentoo\n45.8\n4700\n\n\nGentoo\n49.8\n5700\n\n\nGentoo\n46.2\n4650\n\n\nGentoo\n49.5\n5800\n\n\nGentoo\n43.5\n4700\n\n\nGentoo\n50.7\n5550\n\n\nGentoo\n47.7\n4750\n\n\nGentoo\n46.4\n5000\n\n\nGentoo\n48.2\n5100\n\n\nGentoo\n46.5\n5200\n\n\nGentoo\n46.4\n4700\n\n\nGentoo\n48.6\n5800\n\n\nGentoo\n47.5\n4600\n\n\nGentoo\n51.1\n6000\n\n\nGentoo\n45.2\n4750\n\n\nGentoo\n45.2\n5950\n\n\nGentoo\n49.1\n4625\n\n\nGentoo\n52.5\n5450\n\n\nGentoo\n47.4\n4725\n\n\nGentoo\n50.0\n5350\n\n\nGentoo\n44.9\n4750\n\n\nGentoo\n50.8\n5600\n\n\nGentoo\n43.4\n4600\n\n\nGentoo\n51.3\n5300\n\n\nGentoo\n47.5\n4875\n\n\nGentoo\n52.1\n5550\n\n\nGentoo\n47.5\n4950\n\n\nGentoo\n52.2\n5400\n\n\nGentoo\n45.5\n4750\n\n\nGentoo\n49.5\n5650\n\n\nGentoo\n44.5\n4850\n\n\nGentoo\n50.8\n5200\n\n\nGentoo\n49.4\n4925\n\n\nGentoo\n46.9\n4875\n\n\nGentoo\n48.4\n4625\n\n\nGentoo\n51.1\n5250\n\n\nGentoo\n48.5\n4850\n\n\nGentoo\n55.9\n5600\n\n\nGentoo\n47.2\n4975\n\n\nGentoo\n49.1\n5500\n\n\nGentoo\n47.3\n4725\n\n\nGentoo\n46.8\n5500\n\n\nGentoo\n41.7\n4700\n\n\nGentoo\n53.4\n5500\n\n\nGentoo\n43.3\n4575\n\n\nGentoo\n48.1\n5500\n\n\nGentoo\n50.5\n5000\n\n\nGentoo\n49.8\n5950\n\n\nGentoo\n43.5\n4650\n\n\nGentoo\n51.5\n5500\n\n\nGentoo\n46.2\n4375\n\n\nGentoo\n55.1\n5850\n\n\nGentoo\n44.5\n4875\n\n\nGentoo\n48.8\n6000\n\n\nGentoo\n47.2\n4925\n\n\nGentoo\nNA\nNA\n\n\nGentoo\n46.8\n4850\n\n\nGentoo\n50.4\n5750\n\n\nGentoo\n45.2\n5200\n\n\nGentoo\n49.9\n5400\n\n\nChinstrap\n46.5\n3500\n\n\nChinstrap\n50.0\n3900\n\n\nChinstrap\n51.3\n3650\n\n\nChinstrap\n45.4\n3525\n\n\nChinstrap\n52.7\n3725\n\n\nChinstrap\n45.2\n3950\n\n\nChinstrap\n46.1\n3250\n\n\nChinstrap\n51.3\n3750\n\n\nChinstrap\n46.0\n4150\n\n\nChinstrap\n51.3\n3700\n\n\nChinstrap\n46.6\n3800\n\n\nChinstrap\n51.7\n3775\n\n\nChinstrap\n47.0\n3700\n\n\nChinstrap\n52.0\n4050\n\n\nChinstrap\n45.9\n3575\n\n\nChinstrap\n50.5\n4050\n\n\nChinstrap\n50.3\n3300\n\n\nChinstrap\n58.0\n3700\n\n\nChinstrap\n46.4\n3450\n\n\nChinstrap\n49.2\n4400\n\n\nChinstrap\n42.4\n3600\n\n\nChinstrap\n48.5\n3400\n\n\nChinstrap\n43.2\n2900\n\n\nChinstrap\n50.6\n3800\n\n\nChinstrap\n46.7\n3300\n\n\nChinstrap\n52.0\n4150\n\n\nChinstrap\n50.5\n3400\n\n\nChinstrap\n49.5\n3800\n\n\nChinstrap\n46.4\n3700\n\n\nChinstrap\n52.8\n4550\n\n\nChinstrap\n40.9\n3200\n\n\nChinstrap\n54.2\n4300\n\n\nChinstrap\n42.5\n3350\n\n\nChinstrap\n51.0\n4100\n\n\nChinstrap\n49.7\n3600\n\n\nChinstrap\n47.5\n3900\n\n\nChinstrap\n47.6\n3850\n\n\nChinstrap\n52.0\n4800\n\n\nChinstrap\n46.9\n2700\n\n\nChinstrap\n53.5\n4500\n\n\nChinstrap\n49.0\n3950\n\n\nChinstrap\n46.2\n3650\n\n\nChinstrap\n50.9\n3550\n\n\nChinstrap\n45.5\n3500\n\n\nChinstrap\n50.9\n3675\n\n\nChinstrap\n50.8\n4450\n\n\nChinstrap\n50.1\n3400\n\n\nChinstrap\n49.0\n4300\n\n\nChinstrap\n51.5\n3250\n\n\nChinstrap\n49.8\n3675\n\n\nChinstrap\n48.1\n3325\n\n\nChinstrap\n51.4\n3950\n\n\nChinstrap\n45.7\n3600\n\n\nChinstrap\n50.7\n4050\n\n\nChinstrap\n42.5\n3350\n\n\nChinstrap\n52.2\n3450\n\n\nChinstrap\n45.2\n3250\n\n\nChinstrap\n49.3\n4050\n\n\nChinstrap\n50.2\n3800\n\n\nChinstrap\n45.6\n3525\n\n\nChinstrap\n51.9\n3950\n\n\nChinstrap\n46.8\n3650\n\n\nChinstrap\n45.7\n3650\n\n\nChinstrap\n55.8\n4000\n\n\nChinstrap\n43.5\n3400\n\n\nChinstrap\n49.6\n3775\n\n\nChinstrap\n50.8\n4100\n\n\nChinstrap\n50.2\n3775"
  },
  {
    "objectID": "regression.html#回帰と相関",
    "href": "regression.html#回帰と相関",
    "title": "6  回帰問題に挑戦",
    "section": "6.2 回帰と相関",
    "text": "6.2 回帰と相関"
  },
  {
    "objectID": "classification.html",
    "href": "classification.html",
    "title": "7  分類問題に挑戦",
    "section": "",
    "text": "コードを表示\nlibrary(dplyr)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union"
  },
  {
    "objectID": "classification.html#ロジスティック回帰",
    "href": "classification.html#ロジスティック回帰",
    "title": "7  分類問題に挑戦",
    "section": "7.1 ロジスティック回帰",
    "text": "7.1 ロジスティック回帰"
  },
  {
    "objectID": "classification.html#主成分分析",
    "href": "classification.html#主成分分析",
    "title": "7  分類問題に挑戦",
    "section": "7.2 主成分分析",
    "text": "7.2 主成分分析\n\n\nコードを表示\nsubset(df_zoo, select = c(body_length_cm, weight_kg)) |> \n  dplyr::filter(!is.na(body_length_cm)) |> \n  prcomp(scale. = TRUE)\n\n\nStandard deviations (1, .., p=2):\n[1] 1.3577273 0.3956975\n\nRotation (n x k) = (2 x 2):\n                     PC1        PC2\nbody_length_cm 0.7071068 -0.7071068\nweight_kg      0.7071068  0.7071068"
  },
  {
    "objectID": "classification.html#クラスタリング",
    "href": "classification.html#クラスタリング",
    "title": "7  分類問題に挑戦",
    "section": "7.3 クラスタリング",
    "text": "7.3 クラスタリング"
  },
  {
    "objectID": "summary.html",
    "href": "summary.html",
    "title": "まとめ",
    "section": "",
    "text": "徳島県統計グラフコンクール、統計グラフ全国コンクールに挑戦してみよう。"
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "参考文献・URL",
    "section": "",
    "text": "アルベルト・カイロ著(薮井真澄訳). 2020. グラフのウソを見破る技術 :\nマイアミ大学ビジュアル・ジャーナリズム講座. ダイヤモンド社. http://id.ndl.go.jp/bib/030421662.\n\n\n北川源四郎竹村彰通 編, and 内田誠一孝忠大輔. 2021.\n教養としてのデータサイエンス = Data Science as the Liberal\nArts. データサイエンス入門シリーズ. 講談社. http://id.ndl.go.jp/bib/031484010.\n\n\n日本統計学会. 2020. データの分析 :\n日本統計学会公式認定統計検定3級対応. 改訂版. 東京図書. http://id.ndl.go.jp/bib/030221455.\n\n\n江崎貴裕. 2020. 分析者のためのデータ解釈学入門 :\nデータの本質をとらえる技術. ソシム. http://id.ndl.go.jp/bib/030791751.\n\n\n西内啓. 2013. 統計学が最強の学問である :\nデータ社会を生き抜くための武器と教養. ダイヤモンド社. http://id.ndl.go.jp/bib/024193446.\n\n\n阿部真人. 2021. 統計学入門 : データ分析に必須の知識・考え方 :\n仮説検定から統計モデリングまで重要トピックを完全網羅. ソシム. http://id.ndl.go.jp/bib/031803943."
  },
  {
    "objectID": "exercise.html",
    "href": "exercise.html",
    "title": "付録 A. 練習問題の答えと解説",
    "section": "",
    "text": "答えと解説を表示\n\n40人のクラスで平均点が48点のとき、点数が45点であっても上位20人の中に含まれることがある。\n平均値はデータの真ん中を表わす数値ではないよ。\n\n\nlibrary(ggplot2)\n\n# クラス中の40人のテストの点数\nx\n\n [1] 16 24 27 31 32 32 33 33 36 36 37 38 39 40 40 42 43 43 43 44 44 45 46 46 48\n[26] 50 50 52 52 53 54 65 62 66 70 75 73 82 88 89\n\nmean(x) # クラスの平均点\n\n[1] 47.975\n\nmedian(x) # クラスの点数の中央値\n\n[1] 44\n\np <- \n  tibble::tibble(x = x) |> \n  ggplot(aes(x)) +\n  geom_density() +\n  xlim(0, 100)\n\np +\n  geom_vline(xintercept = median(x), color = \"red\") +\n  geom_vline(xintercept = mean(x), color = \"blue\", linetype = \"dashed\")\n\n\n\n\n\nx[1:20]\n\n [1] 16 24 27 31 32 32 33 33 36 36 37 38 39 40 40 42 43 43 43 44\n\nx[21:40]\n\n [1] 44 45 46 46 48 50 50 52 52 53 54 65 62 66 70 75 73 82 88 89"
  },
  {
    "objectID": "exercise.html#章-動物データの代表値を計算しよう",
    "href": "exercise.html#章-動物データの代表値を計算しよう",
    "title": "付録 A. 練習問題の答えと解説",
    "section": "A.2 3章: 動物データの代表値を計算しよう",
    "text": "A.2 3章: 動物データの代表値を計算しよう\nここで紹介する関数は一部の例です。\n\n\nコードを表示\ndf_zoo <- \n  readr::read_csv(\"data-raw/tokushima_zoo_animals22.csv\", \n                col_types = \"ccdd_\")\n\nsummary(df_zoo)\n\n\n    taxon               name           body_length_cm     weight_kg     \n Length:22          Length:22          Min.   :  1.20   Min.   :  0.90  \n Class :character   Class :character   1st Qu.: 63.62   1st Qu.:  5.85  \n Mode  :character   Mode  :character   Median : 82.50   Median : 12.50  \n                                       Mean   :102.87   Mean   : 65.81  \n                                       3rd Qu.:133.00   3rd Qu.: 69.50  \n                                       Max.   :250.00   Max.   :410.00  \n                                       NA's   :4        NA's   :2       \n\n\nコードを表示\n# 中央値\nquantile(df_zoo$body_length_cm, na.rm = TRUE)[3]\n\n\n 50% \n82.5 \n\n\n\nskimr::skim(df_zoo)\npsych::describe(df_zoo)\nsummarytools::descr(df_zoo)"
  },
  {
    "objectID": "dataset.html",
    "href": "dataset.html",
    "title": "付録 B. データセット",
    "section": "",
    "text": "コードを表示\n# library(palmerpenguins)"
  },
  {
    "objectID": "dataset.html#令和2年度-学校保健統計調査-都道府県別の身長体重の平均値及び標準偏差",
    "href": "dataset.html#令和2年度-学校保健統計調査-都道府県別の身長体重の平均値及び標準偏差",
    "title": "付録 B. データセット",
    "section": "B.2 令和2年度 学校保健統計調査 都道府県別の身長・体重の平均値及び標準偏差",
    "text": "B.2 令和2年度 学校保健統計調査 都道府県別の身長・体重の平均値及び標準偏差\ne-Statで公開されているファイルをRで処理しました。\n\n\nコードを表示\nif (file.exists(\"data-raw/令和2年度_学校保健統計調査_都道府県別_身長と体重_5歳.csv\") == FALSE) {\n  download.file(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000032108465&fileKind=0\",\n                destfile = \"data-raw/r2_hoken_tokei_05.xls\")\n  df_hoken_toukei <- \n    readxl::read_xls(\"data-raw/r2_hoken_tokei_05.xls\", \n                     sheet = 1,\n                     range = \"B8:J55\",\n                     col_names = c(\"区分\",\n                                   paste(\"男\",\n                                         c(paste(\"身長\",\n                                                 c(\"平均値\", \"標準偏差\"),\n                                                 sep = \"_\"), \n                                           paste(\"体重\",\n                                                 c(\"平均値\", \"標準偏差\"),\n                                                 sep = \"_\")),\n                                         sep = \"_\"),\n                                   paste(\"女\",\n                                         c(paste(\"身長\",\n                                                 c(\"平均値\", \"標準偏差\"),\n                                                 sep = \"_\"), \n                                           paste(\"体重\",\n                                                 c(\"平均値\", \"標準偏差\"),\n                                                 sep = \"_\")),\n                                         sep = \"_\"))) |> \n    dplyr::mutate(区分 = stringr::str_squish(区分) |> \n                    stringr::str_remove_all(\"[:space:]\")) |> \n    dplyr::filter(区分 != \"全国\") |>  \n    dplyr::arrange(dplyr::desc(男_身長_平均値))\n  \n  df_hoken_toukei |> \n    readr::write_csv(\"data-raw/令和2年度_学校保健統計調査_都道府県別_身長と体重_5歳.csv\")\n} else {\n  df_hoken_toukei <-\n    readr::read_csv(\"data-raw/令和2年度_学校保健統計調査_都道府県別_身長と体重_5歳.csv\",\n                    col_types = \"cdddddddd\")\n}\n\n\n\ndf_hoken_toukei"
  },
  {
    "objectID": "dataset.html#とくしま動物園で飼育される動物の体の大きさと体重",
    "href": "dataset.html#とくしま動物園で飼育される動物の体の大きさと体重",
    "title": "付録 B. データセット",
    "section": "B.3 とくしま動物園で飼育される動物の体の大きさと体重",
    "text": "B.3 とくしま動物園で飼育される動物の体の大きさと体重\n\n名称: 動物データ\n\n\n\nコードを表示\nif (!file.exists(\"data-raw/tokushima_zoo_animals22.csv\")) {\n  library(dplyr)\n  library(rvest)\n  url <-\n    \"https://www.city.tokushima.tokushima.jp/zoo/gallery/ichiran.html\"\n  x <-\n    read_html(url)\n  # 2016-04-01\n  x |>\n    html_element(css = '#main > div.h1bg > div.update.clearfix > p') |>\n    html_text()\n  animals <-\n    x |>\n    html_elements(css = '#main > div.main_inner > div > p > span') |>\n    html_text() %>%\n    ensurer::ensure(length(.) == 22)\n  \n  # リスザルはリスザル属の総称\n  # ポニーは肩までの高さが147cm以下の馬の総称\n  df_zoo <-\n    tibble::tibble(\n      taxon = c(\"食肉類\", \"鳥類\", \"食肉類\", \"鳥類\", \"霊長類\",\n                \"霊長類\", \"霊長類\", \"食肉類\", \"齧歯類\", \"食肉類\",\n                \"鳥類\", \"偶蹄類\", \"食肉類\", \"食肉類\", \"鳥類\",\n                \"食肉類\", \"霊長類\", \"鳥類\", \"鯨偶蹄類\", \"奇蹄類\",\n                \"齧歯類\", \"鯨偶蹄類\"),\n      name = animals,\n      body_length_cm = c(63.5, 100, 64, 110, 85,\n                         66, 80, 168, 134, 250,\n                         130, 175, 31, NA_real_, 1.2,\n                         250, 35, 69, NA_real_, NA_real_,\n                         40, NA_real_),\n      weight_kg = c(6, 3.5, 5.4, 6.5, 60,\n                    10, 20, 80, 66, 225,\n                    # ホッキョクグマは平均体重のうち最大値を採用\n                    9, 220, 0.9, 30.3, 15,\n                    410, 1.1, 6, 140, NA_real_,\n                    1.5, NA_real_)) %>%\n    assertr::verify(dim(.) == c(22, 4))\n  df_zoo |> \n    readr::write_csv(\"data-raw/tokushima_zoo_animals22.csv\")\n} else {\n  df_zoo <-\n    readr::read_csv(\"data-raw/tokushima_zoo_animals22.csv\", \n                    col_types = \"ccdd\")\n}\n\n\nとくしま動物園で飼育される 22種の動物（2016年4月1日時点の情報）について体の大きさ（体長 cm）と体重（kg）をデータセット化したものです。 体長と体重については各動物のWikipediaのページを参照して記録しています。 原則として、各種の体長および体重の最大値を記録しています。 適当な値の記載がなかった項目については欠損値を与えています。\n\ndf_zoo\n\n\n\n  \n\n\n\nこのデータは GitHubリポジトリに保存してあります。\nhttps://github.com/uribo/tokupon_ds/blob/main/data-raw/tokushima_zoo_animals22.csv"
  },
  {
    "objectID": "dataset.html#とくしま動物園で飼育される動物の保全状況と生息地",
    "href": "dataset.html#とくしま動物園で飼育される動物の保全状況と生息地",
    "title": "付録 B. データセット",
    "section": "B.4 とくしま動物園で飼育される動物の保全状況と生息地",
    "text": "B.4 とくしま動物園で飼育される動物の保全状況と生息地\n\n名称: 動物保全状況データ\n\n\n\nコードを表示\nlibrary(magrittr)\ndf_zoo_name <- \n  tibble::tibble(\n    name = c(\"レッサーパンダ\", \"ホオジロカンムリヅル\", \n             \"コツメカワウソ\", \"カナダガン\", \"チンパンジー\", \n             \"シシオザル\", \"マントヒヒ\", \"ピューマ\", \"カピバラ\", \n             \"ライオン\", \"アフリカハゲコウ\", \"シロオリックス\", \n             \"ミーアキャット\", \"シンリンオオカミ\", \"アンデスコンドル\", \n             \"ホッキョクグマ\", \"リスザル\", \"フンボルトペンギン\", \n             \"ラマ\", \"ポニー\", \"モルモット\", \"ヒツジ\"),\n    scientific_name = c(\"Ailurus fulgens\", \"Balearica regulorum\", \n                        \"Aonyx cinerea\", \"Branta canadensis\", \"Pan troglodytes\",\n                        \"Macaca silenus\", \"Papio hamadryas\", \"Puma concolor\", \n                        \"Hydrochoerus hydrochaeris\", \"Panthera leo\",\n                        \"Leptoptilos crumeniferus\", \"Oryx dammah\", \"Suricata suricatta\", \n                        \"Canis lupus\", \"Vultur gryphus\",\n                        \"Ursus maritimus\", NA_character_, \"Spheniscus humboldti\",\n                        \"Lama glama\", NA_character_,\n                        \"Cavia porcellus\", \"Ovis aries\")) |> \n  dplyr::mutate(link = paste0(\"https://ja.wikipedia.org/wiki/\",\n                              dplyr::recode(name,\n                              `アンデスコンドル` = \"コンドル\",\n                              `ラマ` = \"リャマ\"))) %>% \n  dplyr::filter(!is.na(scientific_name)) %>% \n  assertr::verify(dim(.) == c(20, 3))\n\nif (file.exists(\"data-raw/tokushima_zoo_animals_conservation_status.rds\") == FALSE) {\n  library(rredlist)\n  animal_scname <- \n    df_zoo_name |> \n    purrr::pluck(\"scientific_name\")\n  \n  if (file.exists(\"data-raw/redlist_search_raw.rds\") == FALSE) {\n    result_red_list_search <-\n      animal_scname |> \n      purrr::map_dfr(\n        ~ tibble::as_tibble(purrr::pluck(rredlist::rl_search(name = .x), \n                                         \"result\")))\n    result_red_list_search |> \n      readr::write_rds(\"data-raw/redlist_search_raw.rds\")    \n  } else {\n    result_red_list_search <-\n      readr::read_rds(\"data-raw/redlist_search_raw.rds\")\n  }\n  if (file.exists(\"data-raw/redlist_occ_country_raw.rds\") == FALSE) {\n    result_red_list_occ <- \n      animal_scname |> \n      purrr::set_names(animal_scname) |>\n      purrr::map_dfr(~ tibble::as_tibble(purrr::pluck(rredlist::rl_occ_country(name = .x), \n                                                      \"result\")),\n                     .id = \"scientific_name\")\n    result_red_list_occ |> \n      readr::write_rds(\"data-raw/redlist_occ_country_raw.rds\")\n  } else {\n    result_red_list_occ <- \n      readr::read_rds(\"data-raw/redlist_occ_country_raw.rds\")\n  }\n  result_red_list_occ <- \n    result_red_list_occ |> \n    dplyr::select(!c(distribution_code)) |> \n    tidyr::nest(occ = c(code, country, presence, origin))\n  \n  df_red_list_information <-\n    result_red_list_search |>\n    dplyr::select(\n      taxonid,\n      scientific_name,\n      main_common_name,\n      category,\n      population_trend,\n      tidyselect::ends_with(\"_system\"),\n      tidyselect::starts_with(\"elevation_\"),\n      tidyselect::starts_with(\"depth_\")) |>\n    tidyr::nest(ecosystem = tidyselect::ends_with(\"_system\"),\n                limitation = c(tidyselect::ends_with(\"upper\"), tidyselect::ends_with(\"lower\"))) |>\n    dplyr::left_join(result_red_list_occ, by = \"scientific_name\")\n  df_zoo_conservation <- \n    df_zoo_name |> \n    dplyr::select(!link) |> \n    dplyr::left_join(df_red_list_information, by = \"scientific_name\") %>%\n    assertr::verify(dim(.) == c(20, 9))\n  df_zoo_conservation |> \n    readr::write_rds(\"data-raw/tokushima_zoo_animals_conservation_status.rds\")\n} else {\n  df_zoo_conservation <-\n    readr::read_rds(\"data-raw/tokushima_zoo_animals_conservation_status.rds\")\n}\n\n\n動物データのうち、生物種名（学名）が判別可能な20種についての生息地とその保全状況を 示すデータセットです。国際自然保護連合(IUCN)が指定するIUCNレッドリストからデータを取得しています。\n\ndf_zoo_conservation"
  },
  {
    "objectID": "r_intro.html",
    "href": "r_intro.html",
    "title": "付録 C. Rのイロハ",
    "section": "",
    "text": "オブジェクト、クラス"
  },
  {
    "objectID": "r_intro.html#rrstudioのインストール",
    "href": "r_intro.html#rrstudioのインストール",
    "title": "付録 C. Rのイロハ",
    "section": "C.1 R、RStudioのインストール",
    "text": "C.1 R、RStudioのインストール"
  },
  {
    "objectID": "r_intro.html#電卓として使ってみよう",
    "href": "r_intro.html#電卓として使ってみよう",
    "title": "付録 C. Rのイロハ",
    "section": "C.2 電卓として使ってみよう",
    "text": "C.2 電卓として使ってみよう\n値をオブジェクトに保存することを代入と言います。 代入は <- を使って実行します。 代入した値はオブジェクトを呼び出すこと（参照と言います）によって取り出せます。 また、オブジェクトのコピーや上書きといった処理も可能です。\n\n# 1 + 1の計算結果をオブジェクトxに代入（保存）\nx <- 1 + 1\n\n\n# オブジェクトの呼び出し（参照）\nx\n\n[1] 2\n\n# オブジェクトのコピー\ny <- x\ny\n\n[1] 2\n\n# オブジェクトの上書き\nx <- 9 * 9\n\n\nx\n\n[1] 81\n\ny\n\n[1] 2\n\n\n\nC.2.1 値を比較する\n\n\nC.2.2 関数\n関数には\n引数ひきすうを指定できるものがあります。\n引数名 = 値 の関係で記述します。複数の引数を利用する場合、カンマ , を使って引数を区切ります。\n\n# 平方根\nsqrt(4)\n\n[1] 2\n\nclass(sqrt)\n\n[1] \"function\"\n\nx <- c(1, 3, NA, 5)\nmean(x)\n\n[1] NA\n\n# na.rm引数にTRUEを指定し、欠損を無視した状態で平均を求めます\nmean(x, na.rm = TRUE)\n\n[1] 3"
  },
  {
    "objectID": "r_intro.html#データフレーム",
    "href": "r_intro.html#データフレーム",
    "title": "付録 C. Rのイロハ",
    "section": "C.3 データフレーム",
    "text": "C.3 データフレーム\n\ndata.frame(\n  `名前` = c(\"サトウさん\", \"ウチダさん\", \"エンドウさん\", \"ミシマさん\"),\n  `身長` = c(153.3, 162.8, 145.1, 121.7),\n  `体重` = c(48.4, 59.0, 47.2, 39.1))\n\n\n\n\n\n名前\n身長\n体重\n\n\n\n\nサトウさん\n153.3\n48.4\n\n\nウチダさん\n162.8\n59.0\n\n\nエンドウさん\n145.1\n47.2\n\n\nミシマさん\n121.7\n39.1\n\n\n\n\n\n\n\nC.3.1 データの読み込み\ncsv\n\n\nC.3.2 データのコピー\n表計算ソフトウェアに格納されているデータをRに読み込ませる方法を紹介します。"
  }
]